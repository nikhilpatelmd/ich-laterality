[
  {
    "objectID": "clean.html",
    "href": "clean.html",
    "title": "Process and Clean Data",
    "section": "",
    "text": "Data has been cleaned and merged elsewhere.\n\ndata <- read_csv(here(\"data\", \"all.csv\"))\n\nRows: 5147 Columns: 165\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (73): patient_id, sex, race, euro_mobility_90, euro_mobility_180, euro_...\ndbl  (85): age, gcs_baseline, sbp_baseline, dbp_baseline, ich_volume_baselin...\ndttm  (6): symptom_onset_date_time, ed_date_time, neurosurgery_evac_date_tim...\ndate  (1): death_date\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n# converting some columns to factors\nfactors <- c(\"sex\", \"race\", \"euro_mobility_90\", \"euro_mobility_180\", \"euro_mobility_365\", \"euro_selfcare_90\", \"euro_selfcare_180\", \"euro_selfcare_365\", \"euro_usual_90\", \"euro_usual_180\", \"euro_usual_365\", \"euro_pain_90\", \"euro_pain_180\", \"euro_pain_365\", \"euro_anxiety_90\", \"euro_anxiety_180\", \"euro_anxiety_365\", \"location_90\", \"location_180\", \"location_365\", \"ethnicity\", \"stroke\", \"cad\", \"chf\", \"afib\", \"pvd\", \"hld\", \"dm2\", \"tobacco\", \"htn_meds\", \"dm2_meds\", \"ich_location\", \"ich_laterality\", \"ivh\", \"evd\", \"neurosurgery_evac\", \"tracheostomy\", \"peg\", \"dnr_binary\", \"dni_binary\", \"comfort_care_binary\", \"mrs_90\", \"mrs_180\", \"mrs_365\", \"euroqol_90_assessment_source\", \"euroqol_180_assessment_source\", \"euroqol_365_assessment_source\", \"euro_mobility_365_binary\", \"euro_selfcare_365_binary\", \"euro_usual_365_binary\", \"euro_pain_365_binary\", \"euro_anxiety_365_binary\", \"study\", \"enrolling_country\", \"treatment_group\", \"euro_mobility_90_binary\", \"euro_selfcare_90_binary\", \"euro_usual_90_binary\", \"euro_pain_90_binary\", \"euro_anxiety_90_binary\", \"cocaine\", \"anticoagulated\", \"etoh\", \"mrs_270\", \"location_30\")\n\ndata <- data |>\n  mutate_at(factors, factor)\n\nglimpse(data)\n\nRows: 5,147\nColumns: 165\n$ patient_id                    <chr> \"00003536\", \"00008087\", \"00047804\", \"000…\n$ age                           <dbl> 85, 54, 71, 55, 68, 55, 51, 43, 60, 38, …\n$ sex                           <fct> Female, Male, Male, Female, Female, Male…\n$ race                          <fct> White, White, White, Black or African-Am…\n$ gcs_baseline                  <dbl> 15, 15, 15, 15, 15, 3, NA, 14, 14, 8, 3,…\n$ sbp_baseline                  <dbl> 180, 220, 163, 240, 149, 227, NA, 133, N…\n$ dbp_baseline                  <dbl> 110, 155, 102, 178, 65, 98, NA, 91, NA, …\n$ ich_volume_baseline           <dbl> 42.066, 16.654, 2.999, 9.690, 15.434, 1.…\n$ ivh_volume_baseline           <dbl> 7.427, 0.000, 0.000, 1.289, 0.000, 0.000…\n$ evd_day                       <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ euro_mobility_90              <fct> NA, No Problems, No Problems, Some Probl…\n$ euro_mobility_180             <fct> Some Problems, No Problems, No Problems,…\n$ euro_mobility_365             <fct> Some Problems, No Problems, No Problems,…\n$ euro_selfcare_90              <fct> NA, No Problems, No Problems, No Problem…\n$ euro_selfcare_180             <fct> Some Problems, No Problems, No Problems,…\n$ euro_selfcare_365             <fct> Some Problems, No Problems, No Problems,…\n$ euro_usual_90                 <fct> NA, Some Problems, No Problems, Some Pro…\n$ euro_usual_180                <fct> Some Problems, No Problems, No Problems,…\n$ euro_usual_365                <fct> Some Problems, No Problems, No Problems,…\n$ euro_pain_90                  <fct> NA, No Problems, No Problems, No Problem…\n$ euro_pain_180                 <fct> Some Moderate Pain/Discomfort, Some Mode…\n$ euro_pain_365                 <fct> Some Moderate Pain/Discomfort, Some Mode…\n$ euro_anxiety_90               <fct> NA, Not Anxious/Depressed, Not Anxious/D…\n$ euro_anxiety_180              <fct> Moderately Anxious/Depressed, Not Anxiou…\n$ euro_anxiety_365              <fct> Moderately Anxious/Depressed, Not Anxiou…\n$ euro_vas_90                   <dbl> NA, 90, 95, 80, 5, 50, 95, 70, 90, 80, 7…\n$ euro_vas_180                  <dbl> 70, 95, 90, 95, 75, 75, 98, 80, 65, 90, …\n$ euro_vas_365                  <dbl> 70, 90, 90, NA, 20, 75, 100, 90, NA, 80,…\n$ barthel_feeding_90            <dbl> NA, 10, 10, 10, 5, 10, 10, 10, 10, 10, 1…\n$ barthel_feeding_180           <dbl> 5, 10, 10, 10, 5, 10, 10, 10, 10, 10, NA…\n$ barthel_feeding_365           <dbl> 10, 10, 10, NA, 5, 10, 10, 10, 10, 10, 5…\n$ barthel_bathing_90            <dbl> NA, 5, 5, 5, 0, 5, 5, 5, 5, 5, 0, 5, 0, …\n$ barthel_bathing_180           <dbl> 0, 5, 5, 5, 0, 5, 5, 5, 5, 5, NA, 5, 0, …\n$ barthel_bathing_365           <dbl> 0, 5, 5, NA, 0, 5, 5, 5, 5, 0, 0, 5, 5, …\n$ barthel_grooming_90           <dbl> NA, 5, 5, 5, 0, 5, 5, 5, 5, 5, 5, 5, 5, …\n$ barthel_grooming_180          <dbl> 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, NA, 5, 5, …\n$ barthel_grooming_365          <dbl> 0, 5, 5, NA, 5, 5, 5, 5, 5, 5, 0, 5, 5, …\n$ barthel_dressing_90           <dbl> NA, 10, 10, 10, 5, 10, 10, 10, 10, 5, 5,…\n$ barthel_dressing_180          <dbl> 5, 10, 10, 10, 5, 10, 10, 10, 10, 10, NA…\n$ barthel_dressing_365          <dbl> 0, 10, 10, NA, 5, 10, 10, 10, 10, 5, 0, …\n$ barthel_bowels_90             <dbl> NA, 10, 10, 10, 5, 10, 10, 10, 10, 10, 1…\n$ barthel_bowels_180            <dbl> 5, 10, 10, 10, 0, 10, 10, 10, 10, 10, NA…\n$ barthel_bowels_365            <dbl> 5, 10, 10, NA, 0, 10, 10, 10, 10, 10, 10…\n$ barthel_bladder_90            <dbl> NA, 10, 10, 10, 5, 10, 10, 10, 10, 10, 1…\n$ barthel_bladder_180           <dbl> 5, 10, 10, 10, 0, 10, 10, 10, 10, 10, NA…\n$ barthel_bladder_365           <dbl> 5, 10, 10, NA, 0, 10, 10, 10, 10, 10, 10…\n$ barthel_toilet_90             <dbl> NA, 10, 10, 10, 0, 10, 10, 10, 10, 10, 5…\n$ barthel_toilet_180            <dbl> 10, 10, 10, 10, 0, 10, 10, 10, 10, 10, N…\n$ barthel_toilet_365            <dbl> 5, 10, 10, NA, 0, 10, 10, 10, 10, 5, 5, …\n$ barthel_transfer_90           <dbl> NA, 15, 15, 15, 5, 15, 15, 15, 15, 15, 5…\n$ barthel_transfer_180          <dbl> 15, 15, 15, 15, 5, 15, 15, 15, 15, 15, N…\n$ barthel_transfer_365          <dbl> 10, 15, 15, NA, 5, 15, 15, 15, 15, 10, 5…\n$ barthel_mobility_90           <dbl> NA, 15, 15, 15, 0, 15, 15, 15, 15, 10, 5…\n$ barthel_mobility_180          <dbl> 5, 15, 15, 15, 0, 15, 15, 15, 15, 15, NA…\n$ barthel_mobility_365          <dbl> 5, 15, 15, NA, 0, 15, 15, 15, 15, 5, 0, …\n$ barthel_stairs_90             <dbl> NA, 10, 10, 5, 0, 10, 10, 10, 10, 5, 0, …\n$ barthel_stairs_180            <dbl> 0, 10, 10, 5, 0, 10, 10, 10, 0, 5, NA, 1…\n$ barthel_stairs_365            <dbl> 5, 10, 10, NA, 0, 10, 10, 10, 10, 0, 0, …\n$ barthel_total_90              <dbl> NA, 100, 100, 95, 25, 100, 100, 100, 100…\n$ barthel_total_180             <dbl> 55, 100, 100, 95, 20, 100, 100, 100, 90,…\n$ barthel_total_365             <dbl> 45, 100, 100, NA, 20, 100, 100, 100, 100…\n$ location_90                   <fct> NA, Home, Home, Home, Rehab Facility, Ho…\n$ location_180                  <fct> Long-Term Care Facility, Home, Home, Hom…\n$ location_365                  <fct> NA, Home, Home, NA, Home, Home, Home, Ho…\n$ ethnicity                     <fct> Unknown/Not Reported, Not Hispanic or La…\n$ stroke                        <fct> No, No, Yes, No, Yes, No, No, Yes, No, N…\n$ cad                           <fct> No, No, No, No, No, No, No, No, Yes, No,…\n$ chf                           <fct> Yes, No, No, No, No, No, No, No, Yes, No…\n$ afib                          <fct> Yes, No, No, No, No, No, No, No, No, No,…\n$ pvd                           <fct> No, No, No, No, No, No, No, No, No, No, …\n$ hld                           <fct> Yes, No, Yes, No, Yes, No, Yes, No, Yes,…\n$ dm2                           <fct> No, No, No, No, Yes, No, Yes, Yes, Yes, …\n$ tobacco                       <fct> No, No, No, No, No, No, Yes, Yes, No, No…\n$ htn_meds                      <fct> Yes, No, No, Yes, Yes, Yes, No, Yes, Yes…\n$ dm2_meds                      <fct> No, No, No, No, Yes, No, Yes, Yes, Yes, …\n$ symptom_onset_date_time       <dttm> 2011-01-01 05:00:00, 2012-01-01 05:00:0…\n$ ed_date_time                  <dttm> 2011-01-02 15:00:00, NA, 2013-01-01 15:…\n$ time_symptoms_to_ed           <dbl> 2040, NA, 600, 60, 60, NA, NA, 1260, NA,…\n$ ich_location                  <fct> Lobar, Basal Ganglia, Basal Ganglia, Tha…\n$ ich_laterality                <fct> Right, Right, Right, Right, Left, Left, …\n$ ivh                           <fct> Yes, No, No, Yes, No, No, No, Yes, Yes, …\n$ evd                           <fct> No, No, No, No, No, No, No, No, No, Yes,…\n$ neurosurgery_evac             <fct> No, No, No, No, No, No, Yes, No, Yes, Ye…\n$ neurosurgery_evac_date_time   <dttm> NA, NA, NA, NA, NA, NA, 2014-01-03 02:0…\n$ neurosurgery_evac_hour        <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ neurosurgery_evac_day         <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ tracheostomy                  <fct> No, No, No, No, No, No, No, No, No, No, …\n$ peg                           <fct> No, No, No, No, No, No, No, No, No, No, …\n$ dnr_binary                    <fct> Yes, No, No, No, No, No, No, No, No, NA,…\n$ dni_binary                    <fct> Yes, No, No, No, No, No, No, No, No, NA,…\n$ comfort_care_binary           <fct> No, No, No, No, No, No, No, No, No, No, …\n$ dnr_date_time                 <dttm> 2011-01-13 17:00:00, NA, NA, NA, NA, NA…\n$ dni_date_time                 <dttm> 2011-01-13 17:00:00, NA, NA, NA, NA, NA…\n$ comfort_care_date_time        <dttm> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n$ dnr_hour                      <dbl> 266, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n$ dnr_day                       <dbl> 12, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ dni_hour                      <dbl> 266, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n$ dni_day                       <dbl> 12, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ comfort_care_hour             <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ comfort_care_day              <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ death_date                    <date> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n$ death_day                     <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ mrs_90                        <fct> NA, 2, 1, 2, 4, 1, 1, 1, 3, 2, 4, 2, 2, …\n$ mrs_180                       <fct> 3, 1, 1, 2, 4, 1, 1, 0, 3, 3, NA, 2, 4, …\n$ mrs_365                       <fct> 4, 1, 1, NA, 4, 1, 1, 0, 2, 4, 4, 2, 2, …\n$ euroqol_90_assessment_source  <fct> NA, Other, Other, Caregiver, NA, Other, …\n$ euroqol_180_assessment_source <fct> Caregiver, Other, Other, Caregiver, NA, …\n$ euroqol_365_assessment_source <fct> Caregiver, Other, Other, NA, NA, NA, Oth…\n$ euro_mobility_365_binary      <fct> Any Problems, No Problems, No Problems, …\n$ euro_selfcare_365_binary      <fct> Any Problems, No Problems, No Problems, …\n$ euro_usual_365_binary         <fct> Any Problems, No Problems, No Problems, …\n$ euro_pain_365_binary          <fct> Any Problems, Any Problems, No Problems,…\n$ euro_anxiety_365_binary       <fct> Any Problems, No Problems, No Problems, …\n$ study                         <fct> ERICH, ERICH, ERICH, ERICH, ERICH, ERICH…\n$ enrolling_country             <fct> United States, United States, United Sta…\n$ symptom_onset                 <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ arrival_time_initial          <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ arrival_time_stroke_center    <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ days_mechanical_ventilation   <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ days_EVD                      <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ extubation_day                <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ trach_day                     <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ nsgy_evac_day                 <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ icu_los                       <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ hospital_los                  <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ eq_index_90                   <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ study_end                     <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ study_end_day                 <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ site_id                       <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ treatment_group               <fct> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ htn                           <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ nihss_baseline                <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ nihss_24hours                 <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ hydrocephalus                 <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ phe_volume_baseline           <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ midline_shift_pineal_baseline <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ midline_shift_septum_baseline <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ ich_volume_24hours            <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ ivh_volume_24hours            <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ phe_volume_24hours            <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ midline_shift_pineal_24hours  <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ midline_shift_septum_24hours  <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ patient_died                  <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ mrs_30                        <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ euroqol_assessment_source     <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ euro_mobility_90_binary       <fct> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ euro_selfcare_90_binary       <fct> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ euro_usual_90_binary          <fct> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ euro_pain_90_binary           <fct> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ euro_anxiety_90_binary        <fct> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ hospital_discarge_dispo       <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ cocaine                       <fct> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ anticoagulated                <fct> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ total_doses                   <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ time_last_to_first_dose       <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ ventillation_events           <dbl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ studyname.y                   <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ patient_status_30             <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ gose_30                       <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ patient_status_180            <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ gose_180                      <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ etoh                          <fct> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ hld_meds                      <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ mrs_270                       <fct> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n$ location_30                   <fct> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …"
  },
  {
    "objectID": "dag.html",
    "href": "dag.html",
    "title": "Causal Assumptions - DAG",
    "section": "",
    "text": "Code\nlibrary(tidyverse)\nlibrary(dagitty)\nlibrary(ggdag)\nlibrary(MetBrewer)\nlibrary(here)\nlibrary(broom) # For converting model output to data frames\n\n# set theme of all DAGs to `theme_dag()`\ntheme_set(theme_dag(base_family = \"Cantarell\"))"
  },
  {
    "objectID": "dag.html#specify-a-causal-question",
    "href": "dag.html#specify-a-causal-question",
    "title": "Causal Assumptions - DAG",
    "section": "Specify a Causal Question",
    "text": "Specify a Causal Question\nDo patients with left hemispheric injuries have worse otucomes as compared to patients with right hemispheric injuries?"
  },
  {
    "objectID": "dag.html#exploratory-data-analysis",
    "href": "dag.html#exploratory-data-analysis",
    "title": "Causal Assumptions - DAG",
    "section": "Exploratory Data Analysis",
    "text": "Exploratory Data Analysis\n\n\nCode\ndata <- read_csv(here(\"data\", \"all.csv\"))\n\ndata |>\n  filter(ich_location == c(\"Lobar\", \"Basal Ganglia\", \"Thalamus\")) |>\n  filter(!is.na(ich_laterality)) |>\n  ggplot(aes(euro_vas_90, fill = ich_laterality)) +\n  geom_density(color = NA, alpha = .8)"
  },
  {
    "objectID": "dag.html#model-our-assumptions",
    "href": "dag.html#model-our-assumptions",
    "title": "Causal Assumptions - DAG",
    "section": "Model Our Assumptions",
    "text": "Model Our Assumptions\n\n\nCode\n# original DAG: dagitty.net/mcLgZ8X, pw: CDKM93kbXs\n\nnode_details <- tribble(\n  ~name, ~label, ~x, ~y,\n  \"functional_disability\", \"Functional Disability\", 4, 1,\n  \"ich_laterality\", \"Hemispheric Laterality\", 1, 1,\n  \"age\", \"Age\", 2.75, 3,\n  \"ich_location\", \"ICH Location\", 2, 2.75,\n  \"ich_volume\", \"ICH Volume\", 1, 2.75,\n  \"ivh\", \"IVH\", 1.5, 2.25,\n  \"gcs_baseline\", \"Admission GCS\", 2, 3.25,\n  \"wlst\", \"Early WLST\", 3.75, 2.25,\n  \"neurosurgery\", \"Neurosurgery\", 2, 1.5,\n)\n\nnode_labels <- node_details$label\nnames(node_labels) <- node_details$name\n\nich_dag <- dagify(\n  functional_disability ~ ich_laterality + age + ich_location + ich_volume + ivh + gcs_baseline + wlst + neurosurgery,\n  neurosurgery ~ ich_laterality + age + ich_location + gcs_baseline,\n  wlst ~ age + ich_location + gcs_baseline + ich_volume + ivh,\n  gcs_baseline ~ age + ich_location + ich_volume + ivh,\n  ich_location ~ age,\n  ivh ~ ich_location,\n  exposure = \"ich_laterality\",\n  outcome = \"functional_disability\",\n  coords = node_details,\n  labels = node_labels\n)\n\nich_dag_tidy <- ich_dag |>\n  tidy_dagitty() |>\n  node_status()\n\ncolors <- met.brewer(name = \"VanGogh1\", n = 7, type = \"discrete\")\nstatus_colors <- c(exposure = colors[3], outcome = colors[6], latent = \"grey50\")\n\n# Fancy DAG\nggplot(ich_dag_tidy, aes(x = x, y = y, xend = xend, yend = yend)) +\n  geom_dag_edges(aes(color = \"grey50\")) +\n  geom_dag_point(aes(color = status), size = 20) +\n  geom_dag_label_repel(aes(label = label, fill = status),\n    seed = 1234,\n    color = \"white\", fontface = \"bold\", family = \"Cantarell\", size = 5\n  ) +\n  scale_color_manual(values = status_colors, na.value = \"grey20\") +\n  scale_fill_manual(values = status_colors, na.value = \"grey20\") +\n  guides(color = FALSE, fill = FALSE)\n\n\n\n\n\nCode\nggdag_adjustment_set(ich_dag_tidy) +\n  geom_dag_edges(aes(color = \"grey50\")) +\n  geom_dag_point(aes(color = status), size = 20) +\n  geom_dag_label_repel(aes(label = label, fill = status),\n    seed = 1234,\n    color = \"white\", fontface = \"bold\", family = \"Cantarell\", size = 5\n  ) +\n  scale_color_manual(values = status_colors, na.value = \"grey20\") +\n  scale_fill_manual(values = status_colors, na.value = \"grey20\") +\n  guides(color = FALSE, fill = FALSE)\n\n\n\n\n\nCode\nggdag_paths(ich_dag_tidy) +\n  geom_dag_edges(aes(color = \"grey50\")) +\n  geom_dag_point(aes(color = status), size = 20) +\n  geom_dag_label_repel(aes(label = label, fill = status),\n    seed = 1234,\n    color = \"white\", fontface = \"bold\", family = \"Cantarell\", size = 5\n  ) +\n  scale_color_manual(values = status_colors, na.value = \"grey20\") +\n  scale_fill_manual(values = status_colors, na.value = \"grey20\") +\n  guides(color = FALSE, fill = FALSE)\n\n\n\n\n\nCode\nadjustment_vars <- c(\"neurosurgery\", \"age\", \"ich_volume\", \"ivh\", \"gcs_baseline\", \"ich_location\", \"wlst\")\n\ncontrol_for(ich_dag_tidy, var = adjustment_vars)\n\n\n# A DAG with 9 nodes and 23 edges\n#\n# Exposure: ich_laterality\n# Outcome: functional_disability\n# Paths opened by conditioning on a collider: ich_volume <-> ivh, ich_volume <-> ivh, ich_volume <-> ivh, ich_volume <-> ivh, ich_volume <-> ivh, ich_volume <-> ivh, ich_volume <-> ivh, ich_volume <-> ivh, ich_volume <-> ivh, ich_location <-> ivh, ich_location <-> ivh, ich_location <-> ivh, ich_location <-> ivh, ich_location <-> ivh, ich_location <-> ivh, ich_location <-> ivh, ich_location <-> ivh, ich_location <-> ivh, ich_location <-> ivh, ich_location <-> ivh, ich_location <-> ivh, ich_location <-> ivh, ich_location <-> ivh, ich_location <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, ich_location <-> ich_volume, ich_location <-> ich_volume, ich_location <-> ich_volume, ich_location <-> ich_volume, ich_location <-> ich_volume, ich_location <-> ich_volume, ich_location <-> ich_volume, ich_location <-> ich_volume, ich_location <-> ich_volume, ich_location <-> ich_volume, ich_location <-> ich_volume, ich_location <-> ich_volume, ich_location <-> ich_volume, ich_location <-> ich_volume, ich_location <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, ich_laterality <-> ich_location, ich_laterality <-> ich_location, ich_laterality <-> ich_location, ich_laterality <-> ich_location, ich_laterality <-> ich_location, ich_laterality <-> ich_location, ich_laterality <-> ich_location, ich_laterality <-> ich_location, ich_laterality <-> ich_location, ich_laterality <-> ich_location, gcs_baseline <-> ich_location, gcs_baseline <-> ich_location, gcs_baseline <-> ich_location, gcs_baseline <-> ich_location, gcs_baseline <-> ich_location, gcs_baseline <-> ich_location, gcs_baseline <-> ich_location, gcs_baseline <-> ich_location, gcs_baseline <-> ich_location, gcs_baseline <-> ich_location, gcs_baseline <-> ich_location, gcs_baseline <-> ich_location, gcs_baseline <-> ich_location, gcs_baseline <-> ich_location, gcs_baseline <-> ich_location, ivh <-> ich_location, ivh <-> ich_location, ivh <-> ich_location, ivh <-> ich_location, ivh <-> ich_location, ivh <-> ich_location, ivh <-> ich_location, ivh <-> ich_location, ivh <-> ich_location, ivh <-> ich_location, ivh <-> ich_location, ivh <-> ich_location, ivh <-> ich_location, ivh <-> ich_location, ivh <-> ich_location, ich_volume <-> ich_location, ich_volume <-> ich_location, ich_volume <-> ich_location, ich_volume <-> ich_location, ich_volume <-> ich_location, ich_volume <-> ich_location, ich_volume <-> ich_location, ich_volume <-> ich_location, ich_volume <-> ich_location, ich_volume <-> ich_location, ich_volume <-> ich_location, ich_volume <-> ich_location, ich_volume <-> ich_location, ich_volume <-> ich_location, ich_volume <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, gcs_baseline <-> ich_laterality, gcs_baseline <-> ich_laterality, gcs_baseline <-> ich_laterality, gcs_baseline <-> ich_laterality, gcs_baseline <-> ich_laterality, gcs_baseline <-> ich_laterality, ivh <-> ich_laterality, ivh <-> ich_laterality, ivh <-> ich_laterality, ivh <-> ich_laterality, ivh <-> ich_laterality, ivh <-> ich_laterality, ich_volume <-> ich_laterality, ich_volume <-> ich_laterality, ich_volume <-> ich_laterality, ich_volume <-> ich_laterality, ich_volume <-> ich_laterality, ich_volume <-> ich_laterality, age <-> ich_laterality, age <-> ich_laterality, age <-> ich_laterality, age <-> ich_laterality, age <-> ich_laterality, age <-> ich_laterality, age <-> ich_laterality, age <-> ich_laterality, age <-> ich_laterality, age <-> ich_laterality, ivh <-> gcs_baseline, ivh <-> gcs_baseline, ivh <-> gcs_baseline, ivh <-> gcs_baseline, ivh <-> gcs_baseline, ivh <-> gcs_baseline, ivh <-> gcs_baseline, ivh <-> gcs_baseline, ivh <-> gcs_baseline, ich_volume <-> gcs_baseline, ich_volume <-> gcs_baseline, ich_volume <-> gcs_baseline, ich_volume <-> gcs_baseline, ich_volume <-> gcs_baseline, ich_volume <-> gcs_baseline, ich_volume <-> gcs_baseline, ich_volume <-> gcs_baseline, ich_volume <-> gcs_baseline, age <-> gcs_baseline, age <-> gcs_baseline, age <-> gcs_baseline, age <-> gcs_baseline, age <-> gcs_baseline, age <-> gcs_baseline, age <-> gcs_baseline, age <-> gcs_baseline, age <-> gcs_baseline, age <-> gcs_baseline, age <-> gcs_baseline, age <-> gcs_baseline, age <-> gcs_baseline, age <-> gcs_baseline, age <-> gcs_baseline, ich_volume <-> ivh, ich_volume <-> ivh, ich_volume <-> ivh, ich_volume <-> ivh, ich_volume <-> ivh, ich_volume <-> ivh, ich_volume <-> ivh, ich_volume <-> ivh, ich_volume <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, ich_volume <-> ivh, ich_volume <-> ivh, ich_volume <-> ivh, ich_volume <-> ivh, ich_volume <-> ivh, ich_volume <-> ivh, ich_volume <-> ivh, ich_volume <-> ivh, ich_volume <-> ivh, ich_location <-> ivh, ich_location <-> ivh, ich_location <-> ivh, ich_location <-> ivh, ich_location <-> ivh, ich_location <-> ivh, ich_location <-> ivh, ich_location <-> ivh, ich_location <-> ivh, ich_location <-> ivh, ich_location <-> ivh, ich_location <-> ivh, ich_location <-> ivh, ich_location <-> ivh, ich_location <-> ivh, gcs_baseline <-> ivh, gcs_baseline <-> ivh, gcs_baseline <-> ivh, gcs_baseline <-> ivh, gcs_baseline <-> ivh, gcs_baseline <-> ivh, gcs_baseline <-> ivh, gcs_baseline <-> ivh, gcs_baseline <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, age <-> ivh, ich_location <-> ich_volume, ich_location <-> ich_volume, ich_location <-> ich_volume, ich_location <-> ich_volume, ich_location <-> ich_volume, ich_location <-> ich_volume, ich_location <-> ich_volume, ich_location <-> ich_volume, ich_location <-> ich_volume, ich_location <-> ich_volume, ich_location <-> ich_volume, ich_location <-> ich_volume, ich_location <-> ich_volume, ich_location <-> ich_volume, ich_location <-> ich_volume, gcs_baseline <-> ich_volume, gcs_baseline <-> ich_volume, gcs_baseline <-> ich_volume, gcs_baseline <-> ich_volume, gcs_baseline <-> ich_volume, gcs_baseline <-> ich_volume, gcs_baseline <-> ich_volume, gcs_baseline <-> ich_volume, gcs_baseline <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, age <-> ich_volume, gcs_baseline <-> ich_location, gcs_baseline <-> ich_location, gcs_baseline <-> ich_location, gcs_baseline <-> ich_location, gcs_baseline <-> ich_location, gcs_baseline <-> ich_location, gcs_baseline <-> ich_location, gcs_baseline <-> ich_location, gcs_baseline <-> ich_location, gcs_baseline <-> ich_location, gcs_baseline <-> ich_location, gcs_baseline <-> ich_location, gcs_baseline <-> ich_location, gcs_baseline <-> ich_location, gcs_baseline <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> ich_location, age <-> gcs_baseline, age <-> gcs_baseline, age <-> gcs_baseline, age <-> gcs_baseline, age <-> gcs_baseline, age <-> gcs_baseline, age <-> gcs_baseline, age <-> gcs_baseline, age <-> gcs_baseline, age <-> gcs_baseline, age <-> gcs_baseline, age <-> gcs_baseline, age <-> gcs_baseline, age <-> gcs_baseline, age <-> gcs_baseline\n#\n# A tibble: 440 × 12\n   name                x     y direction to     xend  yend circular label status\n   <chr>           <dbl> <dbl> <fct>     <chr> <dbl> <dbl> <lgl>    <chr> <fct> \n 1 age              2.75  3    ->        func…  4     1    FALSE    Age   <NA>  \n 2 age              2.75  3    ->        gcs_…  2     3.25 FALSE    Age   <NA>  \n 3 age              2.75  3    ->        ich_…  2     2.75 FALSE    Age   <NA>  \n 4 age              2.75  3    ->        neur…  2     1.5  FALSE    Age   <NA>  \n 5 age              2.75  3    ->        wlst   3.75  2.25 FALSE    Age   <NA>  \n 6 functional_dis…  4     1    <NA>      <NA>  NA    NA    FALSE    Func… outco…\n 7 gcs_baseline     2     3.25 ->        func…  4     1    FALSE    Admi… <NA>  \n 8 gcs_baseline     2     3.25 ->        neur…  2     1.5  FALSE    Admi… <NA>  \n 9 gcs_baseline     2     3.25 ->        wlst   3.75  2.25 FALSE    Admi… <NA>  \n10 ich_laterality   1     1    ->        func…  4     1    FALSE    Hemi… expos…\n# ℹ 430 more rows\n# ℹ 2 more variables: collider_line <lgl>, adjusted <fct>\n\n\nCode\nggdag_adjust(ich_dag_tidy, var = adjustment_vars) +\n  geom_dag_edges(aes(color = \"grey50\")) +\n  geom_dag_point(aes(color = status), size = 20) +\n  geom_dag_label_repel(aes(label = label, fill = status),\n    seed = 1234,\n    color = \"white\", fontface = \"bold\", family = \"Cantarell\", size = 5\n  ) +\n  scale_color_manual(values = status_colors, na.value = \"grey20\") +\n  scale_fill_manual(values = status_colors, na.value = \"grey20\") +\n  guides(color = FALSE, fill = FALSE)\n\n\n\n\n\nCode\nggdag_dseparated(ich_dag_tidy, controlling_for = adjustment_vars) +\n  geom_dag_edges(aes(color = \"grey50\")) +\n  geom_dag_point(aes(color = status), size = 20) +\n  geom_dag_label_repel(aes(label = label, fill = status),\n    seed = 1234,\n    color = \"white\", fontface = \"bold\", family = \"Cantarell\", size = 5\n  ) +\n  scale_color_manual(values = status_colors, na.value = \"grey20\") +\n  scale_fill_manual(values = status_colors, na.value = \"grey20\") +\n  guides(color = FALSE, fill = FALSE)"
  },
  {
    "objectID": "models.html",
    "href": "models.html",
    "title": "Models",
    "section": "",
    "text": "Code\nlibrary(tidyverse)\nlibrary(ordinal)\nlibrary(marginaleffects)\nlibrary(modelsummary)\nlibrary(brms)\nlibrary(cmdstanr)\nlibrary(tidybayes)\nlibrary(broom.mixed)\nlibrary(ggplot2)\nlibrary(ggdist)\nlibrary(broom)\nlibrary(gt)\nlibrary(here)\n\noptions(mc.cores = parallel::detectCores())\n\ndata <- read_rds(here(\"data\", \"all.rds\"), refhook = NULL)\n\ndata <- data |>\n  filter(ich_location == \"Basal Ganglia\" | ich_location == \"Thalamus\" | ich_location == \"Lobar\")\n\ndata$ich_location <- fct_drop(data$ich_location)\ntable(data$ich_location)\n\n\n\nBasal Ganglia         Lobar      Thalamus \n         1800          1265          1475 \n\n\nCode\n# plot stuff\ntheme_set(theme_minimal(base_family = \"Cantarell\"))"
  },
  {
    "objectID": "descriptive.html",
    "href": "descriptive.html",
    "title": "ICH Laterality Analysis Notebook",
    "section": "",
    "text": "library(tidyverse) library(dagitty) library(ggdag) library(MetBrewer) library(here) library(tableone) library(gt) library(gtExtras) library(broom)\ndata <- read_csv(here(“data”, “all.csv”))\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n#| fig-width: 20\n\n\nhave to fix time from symptom onset to presentation in ED (units seems to be jacked up)\ntable1_vars <- c(“age”, “sex”, “race”, “ethnicity”, “htn”, “dm2”, “tobacco”, “sbp_baseline”, “gcs_baseline”, “nihss_baseline”, “ich_volume_baseline”, “ivh”, “ich_location”, “neurosurgery_evac”, “comfort_care_binary”, “study”)\ntable1 <- CreateTableOne(vars = table1_vars, data = data, strata = “ich_laterality”)\ntable1"
  },
  {
    "objectID": "models.html#estimate-the-causal-effect",
    "href": "models.html#estimate-the-causal-effect",
    "title": "Models",
    "section": "Estimate the Causal Effect",
    "text": "Estimate the Causal Effect\nFirst let’s do a replication of the INTERACT re-analysis.\n\n\nCode\npriors <- c(prior(normal(0, 1.5), class = Intercept))\n\ninits <- list(Intercept = c(-2, -1, 0, 1, 2, 2.5))\n\n# mod <- brm(mrs_90 ~ 1,\n#   data = data,\n#   family = cumulative(\"logit\"),\n#   prior = priors,\n#   init = rep(list(inits), 4),\n#   chains = 4, iter = 5000 * 2, seed = 28203, cores = 4,\n#   backend = \"cmdstanr\", refresh = 0\n# )"
  },
  {
    "objectID": "models.html#conduct-sensitivity-analyses",
    "href": "models.html#conduct-sensitivity-analyses",
    "title": "Models",
    "section": "Conduct Sensitivity Analyses",
    "text": "Conduct Sensitivity Analyses"
  },
  {
    "objectID": "models.html#visualization",
    "href": "models.html#visualization",
    "title": "Models",
    "section": "Visualization",
    "text": "Visualization\n\n\nCode\nmrs_prop <- data |>\n  count(mrs_90) |>\n  mutate(p = n / sum(n), cumsum_p = cumsum(p)) |>\n  na.omit()\n\nmrs_prop |>\n  ggplot(aes(x = mrs_90, y = p)) +\n  geom_col(fill = \"coral\") +\n  scale_y_continuous(labels = scales::percent) +\n  labs(x = \"mRS 90\", y = \"Proportion\")\n\n\n\n\n\nCode\nmrs_prop |>\n  ggplot(aes(x = as.integer(mrs_90), y = cumsum_p)) +\n  geom_point(size = 2) +\n  geom_line(linewidth = 1) +\n  labs(x = \"mRS 90\", y = \"Cumulative Proportion\")\n\n\n\n\n\nCode\nmrs_prop |>\n  ggplot(aes(x = as.integer(mrs_90), y = log(cumsum_p) - log(1 - cumsum_p))) +\n  geom_point(size = 2) +\n  geom_line(linewidth = 1) +\n  labs(x = \"mRS 90\", y = \"Logit Cumulative Proportion\")"
  },
  {
    "objectID": "models.html#frequentist-analysis",
    "href": "models.html#frequentist-analysis",
    "title": "Models",
    "section": "Frequentist Analysis",
    "text": "Frequentist Analysis\n\nMediation Analysis with Neurosurgery and ICH Laterality\n\n\nCode\nfit_freq <- clm(\n  mrs_90 ~ ich_laterality + age + ich_location + ich_volume_baseline + gcs_baseline + neurosurgery_evac,\n  data = data,\n  link = \"logit\"\n)\n\nsummary(fit_freq)\n\n\nformula: \nmrs_90 ~ ich_laterality + age + ich_location + ich_volume_baseline + gcs_baseline + neurosurgery_evac\ndata:    data\n\n link  threshold nobs logLik   AIC      niter max.grad cond.H \n logit flexible  3105 -5009.42 10044.84 6(0)  1.90e-11 1.3e+06\n\nCoefficients:\n                      Estimate Std. Error z value Pr(>|z|)    \nich_lateralityRight   0.175924   0.066688   2.638  0.00834 ** \nage                   0.047218   0.002600  18.159  < 2e-16 ***\nich_locationLobar    -0.722721   0.088540  -8.163 3.28e-16 ***\nich_locationThalamus  0.600833   0.079165   7.590 3.21e-14 ***\nich_volume_baseline   0.048246   0.002375  20.312  < 2e-16 ***\ngcs_baseline         -0.185189   0.012534 -14.775  < 2e-16 ***\nneurosurgery_evacYes  0.257076   0.134916   1.905  0.05672 .  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nThreshold coefficients:\n    Estimate Std. Error z value\n0|1  -2.0359     0.2370  -8.591\n1|2  -0.1817     0.2287  -0.794\n2|3   0.8436     0.2295   3.675\n3|4   1.7358     0.2313   7.504\n4|5   3.2534     0.2352  13.831\n5|6   3.9700     0.2385  16.642\n(1435 observations deleted due to missingness)\n\n\nCode\npredictions(fit_freq, by = \"ich_laterality\", type = \"cum.prob\") |>\n  gt()\n\n\n\n\n\n\n  \n    \n    \n      group\n      ich_laterality\n      estimate\n      std.error\n      statistic\n      p.value\n      s.value\n      conf.low\n      conf.high\n    \n  \n  \n    0\nLeft\n0.05170063\n0.004182767\n12.36039\n4.280705e-35\n114.1696\n0.04350256\n0.05989870\n    0\nRight\n0.04689133\n0.003863670\n12.13647\n6.768054e-34\n110.1868\n0.03931867\n0.05446398\n    1\nLeft\n0.21964692\n0.008094430\n27.13557\n3.748449e-162\n536.2461\n0.20378213\n0.23551171\n    1\nRight\n0.20616439\n0.007884370\n26.14849\n1.025194e-150\n498.2533\n0.19071131\n0.22161747\n    2\nLeft\n0.38860356\n0.009561093\n40.64426\n0.000000e+00\nInf\n0.36986416\n0.40734296\n    2\nRight\n0.37317285\n0.009518685\n39.20425\n0.000000e+00\nInf\n0.35451657\n0.39182913\n    3\nLeft\n0.55232940\n0.009498554\n58.14879\n0.000000e+00\nInf\n0.53371258\n0.57094622\n    3\nRight\n0.53895835\n0.009541802\n56.48392\n0.000000e+00\nInf\n0.52025676\n0.55765994\n    4\nLeft\n0.78159627\n0.007101016\n110.06823\n0.000000e+00\nInf\n0.76767854\n0.79551401\n    4\nRight\n0.77519113\n0.007193416\n107.76397\n0.000000e+00\nInf\n0.76109229\n0.78928996\n    5\nLeft\n0.85282445\n0.005735993\n148.67948\n0.000000e+00\nInf\n0.84158211\n0.86406679\n    5\nRight\n0.84955782\n0.005896570\n144.07661\n0.000000e+00\nInf\n0.83800076\n0.86111489\n    6\nLeft\n1.00000000\nNA\nNA\nNA\nNA\nNA\nNA\n    6\nRight\n1.00000000\nNA\nNA\nNA\nNA\nNA\nNA\n  \n  \n  \n\n\n\n\nCode\npredictions(fit_freq, by = c(\"ich_location\", \"ich_laterality\"), type = \"cum.prob\") |>\n  gt()\n\n\n\n\n\n\n  \n    \n    \n      group\n      ich_location\n      ich_laterality\n      estimate\n      std.error\n      statistic\n      p.value\n      s.value\n      conf.low\n      conf.high\n    \n  \n  \n    0\nBasal Ganglia\nLeft\n0.05470263\n0.004793131\n11.41271\n3.612749e-30\n97.80475\n0.04530827\n0.06409700\n    0\nBasal Ganglia\nRight\n0.05420352\n0.004906071\n11.04826\n2.235170e-28\n91.85360\n0.04458780\n0.06381925\n    0\nLobar\nLeft\n0.06390128\n0.005792187\n11.03232\n2.668784e-28\n91.59780\n0.05254880\n0.07525376\n    0\nLobar\nRight\n0.05668614\n0.005221576\n10.85614\n1.864736e-27\n88.79309\n0.04645204\n0.06692024\n    0\nThalamus\nLeft\n0.03593127\n0.003564679\n10.07981\n6.785973e-24\n76.96372\n0.02894463\n0.04291791\n    0\nThalamus\nRight\n0.03148284\n0.003081832\n10.21562\n1.687906e-24\n78.97104\n0.02544256\n0.03752312\n    1\nBasal Ganglia\nLeft\n0.23371147\n0.010178104\n22.96218\n1.113441e-116\n385.18863\n0.21376275\n0.25366018\n    1\nBasal Ganglia\nRight\n0.23894462\n0.011021952\n21.67897\n3.240189e-104\n343.78444\n0.21734199\n0.26054725\n    1\nLobar\nLeft\n0.24406204\n0.011204071\n21.78334\n3.338556e-105\n347.06323\n0.22210247\n0.26602162\n    1\nLobar\nRight\n0.22170785\n0.010534091\n21.04670\n2.451711e-98\n324.25516\n0.20106141\n0.24235429\n    1\nThalamus\nLeft\n0.17679627\n0.010029001\n17.62850\n1.488568e-69\n228.63911\n0.15713979\n0.19645275\n    1\nThalamus\nRight\n0.15977160\n0.008961803\n17.82806\n4.279883e-71\n233.75932\n0.14220679\n0.17733641\n    2\nBasal Ganglia\nLeft\n0.40978950\n0.012058082\n33.98463\n3.757641e-253\n838.53798\n0.38615609\n0.43342290\n    2\nBasal Ganglia\nRight\n0.42329574\n0.012969929\n32.63671\n1.237238e-233\n773.70212\n0.39787515\n0.44871633\n    2\nLobar\nLeft\n0.40259603\n0.012538766\n32.10811\n3.397642e-226\n748.99122\n0.37802050\n0.42717156\n    2\nLobar\nRight\n0.37265045\n0.012163719\n30.63623\n4.032142e-206\n682.30564\n0.34881000\n0.39649090\n    2\nThalamus\nLeft\n0.34564699\n0.013732893\n25.16928\n8.694202e-140\n461.94988\n0.31873101\n0.37256296\n    2\nThalamus\nRight\n0.32165821\n0.012800329\n25.12890\n2.403953e-139\n460.48260\n0.29657002\n0.34674639\n    3\nBasal Ganglia\nLeft\n0.57558948\n0.011700004\n49.19566\n0.000000e+00\nInf\n0.55265789\n0.59852106\n    3\nBasal Ganglia\nRight\n0.59331691\n0.012085981\n49.09133\n0.000000e+00\nInf\n0.56962882\n0.61700500\n    3\nLobar\nLeft\n0.54522411\n0.011829783\n46.08910\n0.000000e+00\nInf\n0.52203816\n0.56841006\n    3\nLobar\nRight\n0.51416409\n0.011989819\n42.88339\n0.000000e+00\nInf\n0.49066448\n0.53766371\n    3\nThalamus\nLeft\n0.52645762\n0.014396834\n36.56760\n9.366502e-293\n970.09742\n0.49824035\n0.55467490\n    3\nThalamus\nRight\n0.50246384\n0.013912699\n36.11548\n1.296150e-285\n946.37527\n0.47519545\n0.52973223\n    4\nBasal Ganglia\nLeft\n0.80231219\n0.008274738\n96.95922\n0.000000e+00\nInf\n0.78609401\n0.81853038\n    4\nBasal Ganglia\nRight\n0.81421046\n0.007869037\n103.47016\n0.000000e+00\nInf\n0.79878743\n0.82963348\n    4\nLobar\nLeft\n0.74092628\n0.008612144\n86.03273\n0.000000e+00\nInf\n0.72404679\n0.75780577\n    4\nLobar\nRight\n0.72213959\n0.009592938\n75.27825\n0.000000e+00\nInf\n0.70333777\n0.74094140\n    4\nThalamus\nLeft\n0.79109662\n0.010136064\n78.04771\n0.000000e+00\nInf\n0.77123030\n0.81096294\n    4\nThalamus\nRight\n0.77718524\n0.010234256\n75.93960\n0.000000e+00\nInf\n0.75712646\n0.79724401\n    5\nBasal Ganglia\nLeft\n0.87160347\n0.006435993\n135.42641\n0.000000e+00\nInf\n0.85898915\n0.88421778\n    5\nBasal Ganglia\nRight\n0.87929674\n0.006053759\n145.24806\n0.000000e+00\nInf\n0.86743159\n0.89116189\n    5\nLobar\nLeft\n0.80595981\n0.007171972\n112.37632\n0.000000e+00\nInf\n0.79190300\n0.82001662\n    5\nLobar\nRight\n0.79573031\n0.008294042\n95.93999\n0.000000e+00\nInf\n0.77947429\n0.81198634\n    5\nThalamus\nLeft\n0.87090986\n0.007530754\n115.64710\n0.000000e+00\nInf\n0.85614986\n0.88566987\n    5\nThalamus\nRight\n0.86178788\n0.007750350\n111.19342\n0.000000e+00\nInf\n0.84659747\n0.87697828\n    6\nBasal Ganglia\nLeft\n1.00000000\nNA\nNA\nNA\nNA\nNA\nNA\n    6\nBasal Ganglia\nRight\n1.00000000\nNA\nNA\nNA\nNA\nNA\nNA\n    6\nLobar\nLeft\n1.00000000\nNA\nNA\nNA\nNA\nNA\nNA\n    6\nLobar\nRight\n1.00000000\nNA\nNA\nNA\nNA\nNA\nNA\n    6\nThalamus\nLeft\n1.00000000\nNA\nNA\nNA\nNA\nNA\nNA\n    6\nThalamus\nRight\n1.00000000\nNA\nNA\nNA\nNA\nNA\nNA\n  \n  \n  \n\n\n\n\nCode\nplot_predictions(fit_freq, condition = c(\"ich_location\", \"ich_laterality\"), type = \"cum.prob\")\n\n\nWarning: Removed 6 rows containing missing values (`geom_segment()`).\n\n\n\n\n\nCode\ntidy(fit_freq)\n\n\n# A tibble: 13 × 6\n   term                 estimate std.error statistic  p.value coef.type\n   <chr>                   <dbl>     <dbl>     <dbl>    <dbl> <chr>    \n 1 0|1                   -2.04     0.237      -8.59  8.65e-18 intercept\n 2 1|2                   -0.182    0.229      -0.794 4.27e- 1 intercept\n 3 2|3                    0.844    0.230       3.68  2.38e- 4 intercept\n 4 3|4                    1.74     0.231       7.50  6.19e-14 intercept\n 5 4|5                    3.25     0.235      13.8   1.65e-43 intercept\n 6 5|6                    3.97     0.239      16.6   3.43e-62 intercept\n 7 ich_lateralityRight    0.176    0.0667      2.64  8.34e- 3 location \n 8 age                    0.0472   0.00260    18.2   1.10e-73 location \n 9 ich_locationLobar     -0.723    0.0885     -8.16  3.28e-16 location \n10 ich_locationThalamus   0.601    0.0792      7.59  3.21e-14 location \n11 ich_volume_baseline    0.0482   0.00238    20.3   1.01e-91 location \n12 gcs_baseline          -0.185    0.0125    -14.8   2.13e-49 location \n13 neurosurgery_evacYes   0.257    0.135       1.91  5.67e- 2 location"
  },
  {
    "objectID": "models.html#bayesian-analysis",
    "href": "models.html#bayesian-analysis",
    "title": "Models",
    "section": "Bayesian Analysis",
    "text": "Bayesian Analysis\n\n\nCode\nfit_brms <- brm(\n  mrs_90 ~ ich_laterality + age + ich_location + ich_volume_baseline + gcs_baseline + neurosurgery_evac,\n  data = data,\n  family = cumulative(logit),\n  prior = set_prior(\"normal(0,5)\"),\n  chains = 2,\n  cores = 6,\n  backend = \"cmdstanr\"\n)\n\nprint(fit_brms)\n\n\n Family: cumulative \n  Links: mu = logit; disc = identity \nFormula: mrs_90 ~ ich_laterality + age + ich_location + ich_volume_baseline + gcs_baseline + neurosurgery_evac \n   Data: data (Number of observations: 3105) \n  Draws: 2 chains, each with iter = 2000; warmup = 1000; thin = 1;\n         total post-warmup draws = 2000\n\nPopulation-Level Effects: \n                     Estimate Est.Error l-95% CI u-95% CI Rhat Bulk_ESS\nIntercept[1]            -2.05      0.24    -2.53    -1.56 1.00     2972\nIntercept[2]            -0.19      0.23    -0.67     0.26 1.00     3418\nIntercept[3]             0.84      0.24     0.37     1.28 1.00     3415\nIntercept[4]             1.73      0.24     1.25     2.18 1.00     3424\nIntercept[5]             3.25      0.24     2.78     3.73 1.00     3531\nIntercept[6]             3.97      0.24     3.49     4.45 1.00     3615\nich_lateralityRight      0.18      0.07     0.04     0.31 1.00     2946\nage                      0.05      0.00     0.04     0.05 1.00     3259\nich_locationLobar       -0.72      0.09    -0.89    -0.55 1.00     2473\nich_locationThalamus     0.60      0.08     0.44     0.76 1.00     2346\nich_volume_baseline      0.05      0.00     0.04     0.05 1.00     2636\ngcs_baseline            -0.19      0.01    -0.21    -0.16 1.00     2555\nneurosurgery_evacYes     0.25      0.13     0.00     0.51 1.00     3200\n                     Tail_ESS\nIntercept[1]             1790\nIntercept[2]             1650\nIntercept[3]             1793\nIntercept[4]             1730\nIntercept[5]             1725\nIntercept[6]             1609\nich_lateralityRight      1608\nage                      1529\nich_locationLobar        1625\nich_locationThalamus     1462\nich_volume_baseline      1539\ngcs_baseline             1657\nneurosurgery_evacYes     1362\n\nFamily Specific Parameters: \n     Estimate Est.Error l-95% CI u-95% CI Rhat Bulk_ESS Tail_ESS\ndisc     1.00      0.00     1.00     1.00   NA       NA       NA\n\nDraws were sampled using sample(hmc). For each parameter, Bulk_ESS\nand Tail_ESS are effective sample size measures, and Rhat is the potential\nscale reduction factor on split chains (at convergence, Rhat = 1).\n\n\nCode\npredictions(fit_brms, by = c(\"ich_location\", \"ich_laterality\"), type = \"response\") |>\n  gt()\n\n\n\n\n\n\n  \n    \n    \n      group\n      ich_location\n      ich_laterality\n      estimate\n      conf.low\n      conf.high\n    \n  \n  \n    0\nBasal Ganglia\nLeft\n0.05449119\n0.04565733\n0.06472618\n    0\nBasal Ganglia\nRight\n0.05408702\n0.04540981\n0.06413488\n    0\nLobar\nLeft\n0.06387597\n0.05277829\n0.07647737\n    0\nLobar\nRight\n0.05659268\n0.04731068\n0.06735030\n    0\nThalamus\nLeft\n0.03572561\n0.02942247\n0.04337189\n    0\nThalamus\nRight\n0.03136958\n0.02600279\n0.03781904\n    1\nBasal Ganglia\nLeft\n0.17870199\n0.16240735\n0.19609203\n    1\nBasal Ganglia\nRight\n0.18431733\n0.16724408\n0.20254400\n    1\nLobar\nLeft\n0.17997224\n0.16314970\n0.19653687\n    1\nLobar\nRight\n0.16469797\n0.14978985\n0.18114043\n    1\nThalamus\nLeft\n0.14072594\n0.12464206\n0.15777190\n    1\nThalamus\nRight\n0.12805419\n0.11336293\n0.14404612\n    2\nBasal Ganglia\nLeft\n0.17553394\n0.16272557\n0.18940798\n    2\nBasal Ganglia\nRight\n0.18394930\n0.17105111\n0.19764802\n    2\nLobar\nLeft\n0.15814546\n0.14663415\n0.17098417\n    2\nLobar\nRight\n0.15050806\n0.13963457\n0.16250297\n    2\nThalamus\nLeft\n0.16870117\n0.15435192\n0.18303561\n    2\nThalamus\nRight\n0.16150395\n0.14857566\n0.17521526\n    3\nBasal Ganglia\nLeft\n0.16549416\n0.15331281\n0.17889888\n    3\nBasal Ganglia\nRight\n0.16990372\n0.15748687\n0.18341690\n    3\nLobar\nLeft\n0.14244046\n0.13170870\n0.15399539\n    3\nLobar\nRight\n0.14138264\n0.13065391\n0.15291885\n    3\nThalamus\nLeft\n0.18072054\n0.16726480\n0.19494138\n    3\nThalamus\nRight\n0.18068446\n0.16707898\n0.19494628\n    4\nBasal Ganglia\nLeft\n0.22674979\n0.21077448\n0.24274066\n    4\nBasal Ganglia\nRight\n0.22085391\n0.20438461\n0.23713047\n    4\nLobar\nLeft\n0.19568449\n0.18246451\n0.20983330\n    4\nLobar\nRight\n0.20786203\n0.19437942\n0.22222877\n    4\nThalamus\nLeft\n0.26462588\n0.24666374\n0.28313748\n    4\nThalamus\nRight\n0.27462357\n0.25644206\n0.29351176\n    5\nBasal Ganglia\nLeft\n0.06953191\n0.06043405\n0.07857021\n    5\nBasal Ganglia\nRight\n0.06529098\n0.05694680\n0.07392804\n    5\nLobar\nLeft\n0.06519727\n0.05727845\n0.07363858\n    5\nLobar\nRight\n0.07378954\n0.06474091\n0.08278742\n    5\nThalamus\nLeft\n0.08010667\n0.06942199\n0.09059298\n    5\nThalamus\nRight\n0.08483952\n0.07379331\n0.09645199\n    6\nBasal Ganglia\nLeft\n0.12833964\n0.11591554\n0.14139386\n    6\nBasal Ganglia\nRight\n0.12067643\n0.10962717\n0.13306092\n    6\nLobar\nLeft\n0.19403176\n0.18025948\n0.20839472\n    6\nLobar\nRight\n0.20435719\n0.18809199\n0.22130524\n    6\nThalamus\nLeft\n0.12880492\n0.11555508\n0.14558245\n    6\nThalamus\nRight\n0.13819543\n0.12348267\n0.15501278\n  \n  \n  \n\n\n\n\nCode\nplot_predictions(fit_brms, condition = c(\"ich_location\", \"ich_laterality\"), type = \"response\")"
  },
  {
    "objectID": "logistic.html",
    "href": "logistic.html",
    "title": "Logistic Models",
    "section": "",
    "text": "These analyses are intended to build up intuition on using Bayesian logistic regression as a stepping stone to understanding and using Bayesian ordinal regression. We will work with dichotimized variables of the modified Rankin score as well as the EuroQOL."
  },
  {
    "objectID": "logistic.html#general-setup",
    "href": "logistic.html#general-setup",
    "title": "Logistic Models",
    "section": "General Setup",
    "text": "General Setup\nWe are interested in modeling the probability of a “good” outcome for patients with ICH at 90 days as defined by the modified Rankin Scale. For this session, we will work with a dichotimized version of the mRS at various cutpoints (0-1 vs 2-6, 0-2 vs 3-6, 0-3 vs 4-6, 0-45 vs 5-6). All of these cutpoints have been used in various randomized trials and observational studies.\nWe will base our model on these predictors:\n\nage\nich_laterality: the main “predictor” of interest for the main analysis\nich_location: only supratentorial locations are used (lobar, thalamus, basal ganglia)\nich_volume_baseline\nivh\nneurosurgery_evac\n\n\n\nCode\ndata |>\n  drop_na(mrs_90_03) |>\n  ggplot(aes(x = mrs_90_03)) +\n  geom_density(fill = colors[3], alpha = 0.2) +\n  facet_wrap(~ich_location)"
  },
  {
    "objectID": "aggressive_care.html",
    "href": "aggressive_care.html",
    "title": "Aggressive Care and Hemispheric Laterality",
    "section": "",
    "text": "Setup\nlibrary(tidyverse) # ggplot, dplyr, and friends\nlibrary(janitor)\nlibrary(glue) # Easier string interpolation\nlibrary(gt) # Fancy tables\nlibrary(scales) # Nicer labeling functions\nlibrary(patchwork) # Combine plots nicely\nlibrary(ggmosaic) # Mosaic plots with ggplot\nlibrary(parameters) # Extract model parameters as data frames\nlibrary(cmdstanr) # Run Stan code from R\nlibrary(brms) # Nice frontend for Stan\nlibrary(tidybayes) # Manipulate MCMC chains in a tidy way\nlibrary(here)\n\n# Set some global Stan options\nCHAINS <- 4\nITER <- 2000\nWARMUP <- 1000\nBAYES_SEED <- 160\noptions(mc.cores = parallel::detectCores(), brms.backend = \"cmdstanr\")\n\n# ggplot theming\ntheme_nice <- function() {\n  theme_minimal(base_family = \"Cantarell\") +\n    theme(\n      panel.grid.minor = element_blank(),\n      plot.title = element_text(family = \"Cantarell\", face = \"bold\"),\n      axis.title = element_text(family = \"Cantarell Medium\"),\n      axis.title.x = element_text(hjust = 0),\n      axis.title.y = element_text(hjust = 1),\n      strip.text = element_text(\n        family = \"Cantarell\", face = \"bold\",\n        size = rel(1), hjust = 0\n      ),\n      strip.background = element_rect(fill = NA, color = NA)\n    )\n}\nI am interested in seeing if hemispheric laterality affects the aggressiveness of care that a patient receives. This mostly includes neurosurgery, but also other processes such as days of mechanical ventilation, EVD placement, rates of tracheostomy/PEG, and if patients were transitioned to comfort care.\nI will be using observational data from the ERICH study, as well as the randomized trial data from ATACH-2 to answer these questions."
  },
  {
    "objectID": "aggressive_care.html#exploratory-data-analysis",
    "href": "aggressive_care.html#exploratory-data-analysis",
    "title": "Aggressive Care and Hemispheric Laterality",
    "section": "Exploratory Data Analysis",
    "text": "Exploratory Data Analysis\nLoading the data from ATACH-2 and ERICH, and filtering out the variables needed for the analysis.\n\n# load data\ndata <- read_rds(here(\"data\", \"all.rds\"), refhook = NULL)\n\n# filter out only ERICH and ATACH2 and keep relevant variables\ncleaned_data <- data |>\n  mutate(id = 1:n()) |>\n  filter(study == \"ERICH\" | study == \"ATACH-2\") |>\n  select(id, study, ich_laterality, age, sex, race, ethnicity, sbp_baseline, gcs_baseline, ich_volume_baseline, ivh, ich_location, neurosurgery_evac, evd, tracheostomy, peg, comfort_care_binary, comfort_care_day) |>\n  drop_na(ich_laterality, neurosurgery_evac)\n\nNow we can summarize the preliminary data.\n\ncounts <- cleaned_data |>\n  tabyl(ich_laterality, neurosurgery_evac) |>\n  adorn_percentages(\"row\") |>\n  adorn_pct_formatting(rounding = \"half up\", digits = 1) |>\n  gt()\n\ncounts\n\n\n\n\n\n  \n    \n    \n      ich_laterality\n      No\n      Yes\n    \n  \n  \n    Left\n94.1%\n5.9%\n    Right\n90.5%\n9.5%\n  \n  \n  \n\n\n\nggplot(cleaned_data) +\n  geom_mosaic(\n    aes(\n      x = product(neurosurgery_evac, ich_laterality),\n      fill = ich_laterality, alpha = neurosurgery_evac\n    ),\n    divider = mosaic(\"v\")\n  )\n\nWarning: Using alpha for a discrete variable is not advised.\n\n\nWarning: `unite_()` was deprecated in tidyr 1.2.0.\nℹ Please use `unite()` instead.\nℹ The deprecated feature was likely used in the ggmosaic package.\n  Please report the issue at <https://github.com/haleyjeppson/ggmosaic>."
  },
  {
    "objectID": "aggressive_care.html#the-question",
    "href": "aggressive_care.html#the-question",
    "title": "Aggressive Care and Hemispheric Laterality",
    "section": "The Question",
    "text": "The Question\nDo patients with left hemispheric ICH receive neurosurgical evacuations less frequently as compared to patients with right hemispheric ICH?\nWe want to determine if there’s a substantial difference in the proportion of patients who receive neurosurgical intervention in the right or left hemisphere.\n\n# Left/Right hemisphere question colors\nclrs_saguaro <- NatParksPalettes::natparks.pals(\"Saguaro\")\nclr_left <- clrs_saguaro[1]\nclr_right <- clrs_saguaro[6]\nclr_diff <- clrs_saguaro[4]"
  },
  {
    "objectID": "aggressive_care.html#frequentist-way",
    "href": "aggressive_care.html#frequentist-way",
    "title": "Aggressive Care and Hemispheric Laterality",
    "section": "Frequentist Way",
    "text": "Frequentist Way\n\nmod_freq <- lm(neurosurgery_evac ~ ich_laterality + 0,\n  data = cleaned_data\n)\n\nWarning in model.response(mf, \"numeric\"): using type = \"numeric\" with a factor\nresponse will be ignored\n\n\nWarning in Ops.factor(y, z$residuals): '-' not meaningful for factors\n\nmodel_parameters(mod_freq, exponentiate = TRUE)\n\nParameter              | Coefficient | 95% CI |   df\n----------------------------------------------------\nich laterality [Left]  |        2.88 |        | 3806\nich laterality [Right] |        2.99 |        | 3806\n\n\n\nUncertainty intervals (equal-tailed) and p-values (two-tailed) computed\n  using a Wald t-distribution approximation."
  }
]